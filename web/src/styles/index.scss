@tailwind base;
@tailwind utilities;
@tailwind components;
@use "sass:math";

// Base style
@layer base {
  html,
  body,
  #root {
    @apply p-0 m-0 min-h-full h-auto overflow-hidden max-h-screen font-sans;
    font-size: 14px;
    * {
      @apply box-border focus:outline-none;
    }
  }
  /* inter-regular - latin */
  /* quicksand-regular - latin */
  /* cabin-regular - latin */
  /* hind-regular - latin */
  @font-face {
    font-family: 'Hind';
    font-style: normal;
    font-weight: 400;
    src: url('./fonts/hind-v11-latin-regular.eot'); /* IE9 Compat Modes */
    src: local(''), url('./fonts/hind-v11-latin-regular.eot?#iefix') format('embedded-opentype'),
      /* IE6-IE8 */ url('./fonts/hind-v11-latin-regular.woff2') format('woff2'),
      /* Super Modern Browsers */ url('./fonts/hind-v11-latin-regular.woff') format('woff'),
      /* Modern Browsers */ url('./fonts/hind-v11-latin-regular.ttf') format('truetype'),
      /* Safari, Android, iOS */ url('./fonts/hind-v11-latin-regular.svg#Hind') format('svg'); /* Legacy iOS */
  }
}

$lg: 1024px;
$primary: #3b3b3b;
$secondary: #414141;
$mask: rgba(0, 0, 0, 0.45);
$transition_duration: 300ms;
$menubar_height: 2.25rem;
$column_gap: 1.25rem;
$row_gap: 1rem;
$mobile_column_gap: 0.5rem;
$mobile_row_gap: 0.75rem;

@layer components {
  // Mobile breakpoint mixin
  @mixin breakpoint {
    @media (max-width: $lg) {
      @content;
    }
  }

  // Non-clickable button
  @mixin buttonDisabled {
    &:disabled {
      @apply text-gray-400 bg-tabFocus;
      @apply transform-none shadow-none cursor-default;
      .react-icons {
        fill: #9ca3af;
      }
    }
  }

  // Image zoom slider thumb
  @mixin sliderThumb {
    -webkit-appearance: none;
    -moz-appearance: none;
    @apply appearance-none  rounded-full transform bg-primary;
    border: 2px solid white;
    width: 11px;
    height: 11px;

    &:active {
      @apply bg-white w-5 h-5;
      border: 1px solid white;
    }
  }

  .Waterfall {
    display: grid;
    justify-content: center;
    gap: $column_gap;

    @include breakpoint {
      gap: $mobile_column_gap;
    }

    .imageColumn {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      grid-auto-rows: min-content;
      gap: $row_gap;

      @include breakpoint {
        gap: $mobile_row_gap;
      }

      img {
        @apply w-full h-full;
      }
    }
  }

  .Justified {
    @apply flex flex-row flex-wrap justify-start;
    column-gap: $column_gap;
    row-gap: $row_gap;

    @include breakpoint {
      column-gap: $mobile_column_gap;
      row-gap: $mobile_row_gap;
    }
    figure {
      @apply flex-grow;
      img {
        object-fit: cover;
        max-width: 100%;
        min-width: 100%;
        vertical-align: bottom;
      }
    }
  }

  .sidebar {
    @apply top-0 bg-secondary z-20 pt-2 border-gray-900 border-opacity-70;
    height: calc(100vh - #{$menubar_height});
  }

  .mask {
    @apply fixed top-0 left-0 w-full h-0 opacity-0 bg-mask z-10;
  }

  .mask-active {
    @apply h-full opacity-100;
  }

  .menubar {
    vertical-align: -moz-middle-with-baseline;
    vertical-align: -webkit-baseline-middle;
    & > div {
      @apply px-2 p-1 hover:bg-black hover:bg-opacity-25 rounded-md;
    }
  }

  .tab {
    @apply w-full focus:bg-tabFocus hover:bg-tabFocus cursor-pointer rounded-lg flex flex-row items-center;

    .image-count {
      @apply text-gray-400 pr-2;
    }
    .edit-library {
      @apply text-gray-400 hover:bg-tabActive rounded-lg h-full p-1;
      display: none;

      .react-icons {
        @apply h-full mx-auto;
      }
    }

    &:hover {
      .edit-library {
        @apply block;
      }
      .image-count {
        display: none;
      }
    }
  }

  @keyframes rotation {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes progress-animation {
    from {
      background-position: 100%;
    }
    to {
      background-position: 0;
    }
  }

  .tab-active {
    @apply bg-tabActive font-medium;
  }

  .tab-hidden {
    @apply w-0 h-0 overflow-hidden;
  }

  .tab-editing {
    @apply z-50 mb-2 py-1 px-3 border border-blue-500;
  }

  .tab-editing-error {
    @apply border-red-400;
  }

  .profile-stat {
    @apply flex-grow flex flex-col items-center w-20;
  }

  .progress {
    transition: right 0.5s cubic-bezier(0, 0.55, 0.45, 1);
    background: linear-gradient(
      90deg,
      #8ab6d6,
      #2978b5 17%,
      #0061a8 34%,
      #0039a6 51%,
      #8ab6d6 68%,
      #2978b5 85%,
      #0061a8
    );
    background-size: 300% 100%;
    animation: progress-animation 2s linear infinite;
  }

  .progressBar-icon {
    @apply text-2xl font-bold hover:bg-tabFocus cursor-pointer rounded-md transform transition-transform duration-500;
  }

  .toolbox-button {
    min-height: 3rem;
    min-width: 3rem;
    padding: 1px;
    margin: 2px;
    button {
      @apply bg-tabActive transition-all transform hover:scale-95 w-full h-full flex flex-col
      justify-center items-center duration-75 rounded-lg rounded-bl-md rounded-tr-md active:delay-700;

      @include buttonDisabled;
    }
  }

  .zoom-slider {
    @apply bg-gray-500 h-1 w-3/4 appearance-none rounded-lg;
    max-width: 8rem;
    cursor: grab;
    &:active {
      cursor: grabbing;
    }

    &::-ms-thumb {
      @include sliderThumb;
    }

    &::-webkit-slider-thumb {
      @include sliderThumb;
    }

    &::-moz-range-thumb {
      @include sliderThumb;
    }

    &::-moz-range-progress {
      background-color: white;
    }
    &::-ms-fill-lower {
      background-color: white;
    }
  }

  .slides {
    @apply fixed top-0 left-0 w-full h-full;
    z-index: 1000;

    .swiper-container {
      @apply h-full z-50;
    }

    .swiper-pagination-bullet {
      @apply bg-gray-400 opacity-60;
    }

    .swiper-pagination-bullet {
      @apply w-3 h-3;
    }

    .swiper-button-disabled {
      @apply text-gray-400;
    }

    .swiper-pagination-bullet-active {
      @apply bg-white w-4 h-4 opacity-100;
    }

    .swiper-button-next,
    .swiper-button-prev {
      @apply text-white;
    }
  }

  .slides-button {
    svg {
      @apply w-full;
    }
  }

  .imageProperties {
    @apply w-full bg-textArea rounded-md border border-mask p-2 max-w-sm;
  }

  .loginButton {
    @apply px-4 py-1 bg-primary opacity-70 hover:opacity-100 active:bg-black;
  }

  .pop-confirm {
    position: relative;

    &::after {
      @apply absolute top-full left-1/2 block border-l-8 border-r-8 border-alert border-t-8;
      border-left-color: transparent;
      border-right-color: transparent;
      content: '';
    }
  }

  .resizeHandler {
    @apply hover:bg-gray-400 active:bg-blue-500;
  }

  .text-truncate {
    @apply overflow-hidden overflow-ellipsis whitespace-nowrap;
  }

  .topbarColumn {
    @apply flex flex-row items-center;
  }

  .searchForm {
    @apply relative flex-shrink-[2] overflow-hidden;
    .searchIcon {
      @apply absolute h-full bg-tabFocus rounded-l-md w-8 flex flex-row justify-center items-center cursor-pointer active:bg-tabActive;
    }
    .searchBox {
      @apply max-w-full bg-textArea  focus:shadow-inner py-1 pr-8 pl-11 rounded-md caret-gray-400;
    }
    .cancelIcon {
      @apply absolute right-2 top-0 h-full flex flex-row justify-center items-center cursor-pointer;
    }
  }
}

.navigation-wrap {
  max-height: calc(100vh - #{$menubar_height});
}

.gallery {
  max-height: calc(100vh - #{$menubar_height});
}

.fade-transition-enter {
  opacity: 0;
}
.fade-transition-enter-active {
  opacity: 1;
  transition: opacity 200ms;
}
.fade-transition-exit {
  opacity: 1;
}
.fade-transition-exit-active {
  opacity: 0;
  transition: opacity 200ms;
}

.image-transition-enter {
  opacity: 0;
}
.image-transition-enter-active {
  opacity: 1;
  transition: opacity 2000ms;
}
.slides-transition-exit {
  opacity: 1;
}
.image-transition-exit-active {
  opacity: 0;
  transition: opacity 2000ms;
}
